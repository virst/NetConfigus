# NetConfigus: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è .NET

![License](https://img.shields.io/badge/license-MIT-blue)
![Version](https://img.shields.io/badge/version-1.0.0-green)

**NetConfigus** ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π .NET, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –∏ JSON-—Ñ–∞–π–ª—ã –≤ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å —á–µ—Ç–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–µ–π –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

## üåü –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ú—É–ª—å—Ç–∏–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤–æ—Å—Ç—å**: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ —Ç—Ä–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
  1. –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
  2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã
  3. JSON-—Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ì–∏–±–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥**:
  - –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ (`app.exe file.txt`)
  - –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ (`--output=result.json`)
  - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–ª–∞–≥–∏ (`-ab`)
  - –ü—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`-c=`)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤**: `int`, `bool`, `double`, `string`, –º–∞—Å—Å–∏–≤—ã
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π –û–° —Å .NET 5+

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –ø–∞–∫–µ—Ç —á–µ—Ä–µ–∑ NuGet:
```bash
dotnet add package NetConfigus
```

–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –≤ .csproj:
```xml
<PackageReference Include="NetConfigus" Version="1.0.0" />
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```csharp
public class AppConfig
{
    [CommandLine(Position = 0, Required = true)]
    public string Source { get; set; } = default!;

    [CommandLine(ShortName = 't', EnvironmentVariableName = "APP_THREADS")]
    public int Threads { get; set; } = 1;

    [CommandLine(LongName = "verbose")]
    public bool Verbose { get; set; }
}
```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```csharp
var config = CommandLineParser.Load<AppConfig>(
    "config.json",          // –ü—É—Ç—å –∫ JSON-—Ñ–∞–π–ª—É
    Environment.GetCommandLineArgs()[1..], // –ê—Ä–≥—É–º–µ–Ω—Ç—ã
    isConfigFileRequired: false
);
```

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```csharp
Console.WriteLine($"Processing {config.Source} with {config.Threads} threads");
if (config.Verbose) Console.WriteLine("Verbose mode enabled");
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—Ç—Ä–∏–±—É—Ç `CommandLineAttribute`

| –°–≤–æ–π—Å—Ç–≤–æ                  | –û–ø–∏—Å–∞–Ω–∏–µ                              | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é   |
|---------------------------|---------------------------------------|----------------|
| `ShortName` (char)        | –ö—Ä–∞—Ç–∫–æ–µ –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (`-v`)          | `'\0'`         |
| `LongName` (string)       | –ü–æ–ª–Ω–æ–µ –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (`--verbose`)    | `null`         |
| `Description` (string)    | –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏                  | `null`         |
| `EnvironmentVariableName` | –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ä–µ–¥—ã                  | `null`         |
| `Required` (bool)         | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞              | `false`        |
| `Position` (int)          | –ü–æ–∑–∏—Ü–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (0-based)           | `-1` (–Ω–µ –∑–∞–¥–∞–Ω)|

### –ú–µ—Ç–æ–¥—ã `CommandLineParser`

#### `Load<T>(string? fn, string[]? args, bool isConfigFileRequired = false)`
–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `fn`: –ü—É—Ç—å –∫ JSON-—Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `args`: –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- `isConfigFileRequired`: –í—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω

#### `Parse<T>(T options, string[] args)`
–ü–∞—Ä—Å–∏—Ç —Ç–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–ª–∞–≥–∏
```csharp
public class Flags {
    [CommandLine(ShortName = 'a')] public bool A { get; set; }
    [CommandLine(ShortName = 'b')] public bool B { get; set; }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: app -ab
// –†–µ–∑—É–ª—å—Ç–∞—Ç: A=true, B=true
```

### –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏
```csharp
public class LogConfig {
    [CommandLine(ShortName = 'l')]
    public string[] Logs { get; set; } = [];
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: app -l=error -l=debug
// –†–µ–∑—É–ª—å—Ç–∞—Ç: Logs = ["error", "debug"]
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```json
// config.json
{ "ApiKey": "default-key" }
```

```csharp
public class ServiceConfig {
    [CommandLine(EnvironmentVariableName = "API_KEY")]
    public string ApiKey { get; set; } = default!;
}

// –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ä–µ–¥—ã API_KEY=prod-key
// –†–µ–∑—É–ª—å—Ç–∞—Ç: ApiKey = "prod-key"
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã: `string`, `int`, `bool`, `double`, –º–∞—Å—Å–∏–≤—ã
- –ë—É–ª–µ–≤—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–º–∏
- –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

## üë§ –ê–≤—Ç–æ—Ä
**virst**  
[GitHub –ø—Ä–æ—Ñ–∏–ª—å](https://github.com/virst)

---

```mermaid
graph LR
    A[–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON] --> B[–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã]
    B --> C[–ê—Ä–≥—É–º–µ–Ω—Ç—ã CLI]
    C --> D[–í–∞–ª–∏–¥–∞—Ü–∏—è]
    D --> E[–ì–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥]
```

> NetConfigus —É–ø—Ä–æ—â–∞–µ—Ç –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ–¥–∞.